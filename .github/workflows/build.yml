name: Build

on:
  push:
  #   branches: [ master ]
  pull_request:
    branches: [ master ]

env:
  BUILD_TYPE: Release

  workflow_dispatch:

jobs:
  build-linux:
    runs-on: ubuntu-latest

    steps:
    # - name: Dependencies
    #   run: |
    #     sudo apt update
    #     sudo apt-get install -y python3
    #     sudo pip install conan
    - name: Install Conan
      id: conan
      uses: turtlebrowser/get-conan@main
    - name: Checkout repository
      uses: actions/checkout@v2
    - name: Build
      run: mkdir -p build; cd build && conan install .. --build=missing  -s compiler.libcxx=libstdc++11 && cmake -DCMAKE_BUILD_TYPE=Debug .. && cmake --build  . -- -j 3

    # - name: Build project
    #   run: cmake -B build -DCMAKE_TOOLCHAIN_FILE=./vcpkg/scripts/buildsystems/vcpkg.cmake && cmake --build build

    # - name: Launch build script
    #   run: ./setup.sh

  # build-windows:
  #   runs-on: windows-latest

  #   steps:
  #   - name: Checkout repository
  #     uses: actions/checkout@v2

  #   - name: Launch build script
  #     run: ./setup.bat